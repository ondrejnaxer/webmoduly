:root{
  --bg:#f0f2f5;
  --panel:#ffffff;
  --border:#dcdcde;
  --muted:#646970;
  --text:#1d2327;
  --blue:#2271b1;
  --blue2:#135e96;
  --danger:#b32d2e;
  --danger-soft:#fff1f1;
  --shadow:0 1px 1px rgba(0,0,0,.04);
  --radius:6px;
  --indent:30px;
  --rowpad:12px;
  --font: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
}
*{box-sizing:border-box}
body{margin:0;font-family:var(--font);color:var(--text);background:var(--bg)}

.topbar{position:sticky;top:0;z-index:10;background:var(--panel);border-bottom:1px solid var(--border);box-shadow:var(--shadow)}
.topbar .inner{max-width:1100px;margin:0 auto;padding:12px 16px;display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.topbar label{color:var(--muted);font-size:12px;display:block;margin-bottom:4px}
.field{display:flex;flex-direction:column;min-width:240px}
.top-actions-right{display:flex;gap:10px;align-items:center}

select,input[type="text"],input[type="url"],input[type="number"]{width:100%;padding:8px 10px;border:1px solid var(--border);border-radius:var(--radius);outline:none;background:#fff;font-size:14px}
select:focus,input:focus{border-color:rgba(34,113,177,.6);box-shadow:0 0 0 3px rgba(34,113,177,.15)}

.btn{border:1px solid var(--border);background:#fff;padding:8px 12px;border-radius:var(--radius);cursor:pointer;font-weight:600;font-size:14px;color:var(--text)}
.btn.primary{background:var(--blue);border-color:var(--blue);color:#fff}
.btn.primary:hover{background:var(--blue2);border-color:var(--blue2)}
.btn:hover{border-color:#c3c4c7}
.btn:active{transform:translateY(1px)}
.btn.danger{color:#fff;background:var(--danger);border-color:var(--danger)}
.btn.icon-only{width:38px;height:38px;padding:0;display:grid;place-items:center;font-size:18px}
.btn:disabled{opacity:.45;cursor:not-allowed;transform:none}
.spacer{flex:1}

.wrap{max-width:1100px;margin:18px auto 120px;padding:0 16px}
.notice{color:var(--muted);font-size:13px;margin:14px 2px}

.list{background:transparent}
.menu-row{margin:10px 0;padding-left:calc(var(--lvl, 0) * var(--indent))}
.menu-item{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);max-width:860px;width:100%;overflow:hidden}
.menu-item.dragging{opacity:1;outline:2px solid rgba(34,113,177,.65);outline-offset:2px;box-shadow:0 0 0 4px rgba(34,113,177,.15),var(--shadow)}
.menu-item .head{display:flex;align-items:center;gap:10px;padding:var(--rowpad);cursor:grab}
.menu-item .head:active{cursor:grabbing}
.title{font-weight:700;flex:1;display:flex;align-items:center;gap:8px;min-width:0}
.title .badge{font-size:12px;color:var(--muted);font-weight:600;border:1px solid var(--border);padding:2px 8px;border-radius:999px;white-space:nowrap}
.title .txt{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.toggle{width:34px;height:34px;border:1px solid var(--border);border-radius:8px;display:grid;place-items:center;background:#fff;cursor:pointer}
.toggle:hover{border-color:#c3c4c7}
.toggle svg{width:16px;height:16px;transition:transform .15s ease}
.menu-item.open .toggle svg{transform:rotate(180deg)}

.details{display:none;border-top:1px solid var(--border);padding:14px 14px 10px;background:#fbfbfc}
.menu-item.open .details{display:block}
.grid{display:grid;grid-template-columns:1fr;gap:12px}
.grid .full{grid-column:1 / -1}
.actions{margin-top:10px;display:flex;flex-wrap:wrap;gap:10px;align-items:center}
.actions .links{font-size:13px;color:var(--muted);display:flex;flex-wrap:wrap;gap:12px;align-items:center}
.linkbtn{border:none;background:transparent;color:var(--blue);cursor:pointer;padding:0;font-size:13px;font-weight:600}
.linkbtn:hover{color:var(--blue2);text-decoration:underline}
.meta{margin-top:10px;font-size:12px;color:var(--muted)}

.drop-hint{height:0;border-top:2px solid rgba(34,113,177,.65);margin:0;display:none}
.drop-hint.show{display:block}

.trash-dropzone{position:fixed;left:16px;right:16px;bottom:16px;padding:14px 16px;border:1px dashed var(--danger);border-radius:12px;background:var(--danger-soft);color:var(--danger);display:flex;align-items:center;gap:12px;box-shadow:0 8px 24px rgba(0,0,0,.08);opacity:0;pointer-events:none;transform:translateY(20px);transition:opacity .15s ease,transform .15s ease;z-index:35}
.trash-dropzone.show{opacity:1;pointer-events:auto;transform:translateY(0)}
.trash-dropzone.active{background:#ffe4e4;border-style:solid}
.trash-icon{font-size:24px;line-height:1}
.trash-dropzone strong{display:block;margin-bottom:2px}
.trash-dropzone div{font-size:13px}

.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:39}
.modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:min(620px,calc(100vw - 24px));max-height:85vh;overflow:auto;background:var(--panel);border:1px solid var(--border);border-radius:10px;box-shadow:0 20px 48px rgba(0,0,0,.18);z-index:40}
.modal-head{padding:14px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.modal-head h2{margin:0;font-size:20px}
.icon-close{border:none;background:transparent;font-size:30px;line-height:1;cursor:pointer;color:var(--muted)}
.modal-body{padding:16px;display:grid;gap:12px}
.modal-body label{display:block;color:var(--muted);font-size:12px;margin-bottom:4px}
.modal-actions{display:flex;justify-content:flex-end;gap:10px;margin-top:6px}

.confirm-modal{width:min(420px,calc(100vw - 24px))}
.confirm-text{margin:0;color:var(--text);font-size:14px;line-height:1.4}

.preview-modal{width:min(920px,calc(100vw - 24px));min-height:420px}
.preview-nav{background:#fff;border:1px solid var(--border);border-radius:8px;padding:0;overflow:visible;min-height:320px}
.preview-menu-list,.preview-submenu-list{list-style:none;margin:0;padding:0}
.preview-menu-list{display:flex;align-items:stretch}
.preview-submenu-list{min-width:170px}
.preview-menu-item{position:relative}
.preview-link{display:flex;align-items:center;gap:8px;padding:12px 16px;color:var(--text);text-decoration:none;font-weight:500;white-space:nowrap}
.preview-link:hover{background:#f0f2f5;color:var(--text)}
.preview-marker{color:var(--text);font-size:12px}
.preview-submenu{display:none;background:#fff;border:1px solid #c3c4c7;border-radius:6px;box-shadow:0 8px 16px rgba(0,0,0,.08);z-index:3}
.preview-menu-item.has-children:hover>.preview-submenu{display:block}
.preview-submenu.depth-1{position:absolute;top:100%;left:0;min-width:170px}
.preview-submenu.depth-2plus{position:absolute;top:0;left:100%;min-width:170px}
.preview-submenu .preview-link{padding:12px 16px;font-weight:400}
.preview-submenu .preview-link:hover{background:#f0f2f5}

.toast{position:fixed;right:16px;bottom:16px;background:rgba(29,35,39,.94);color:#fff;padding:10px 12px;border-radius:10px;box-shadow:0 8px 22px rgba(0,0,0,.25);font-size:13px;transform:translateY(12px);opacity:0;pointer-events:none;transition:opacity .2s ease,transform .2s ease}
.toast.show{opacity:1;transform:translateY(0)}
